{% extends 'base.html.twig' %}

{% block navigationLeft %}
    {% if app.user == pin.user %}
        <a href="{{ path('app_pin_edit', { id: pin.id }) }}">
            <svg width="24" height="24" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                <path fill="currentColor"
                      d="m18.988 2.012l3 3L19.701 7.3l-3-3zM8 16h3l7.287-7.287l-3-3L8 13z"></path>
                <path fill="currentColor"
                      d="M19 19H8.158c-.026 0-.053.01-.079.01c-.033 0-.066-.009-.1-.01H5V5h6.847l2-2H5c-1.103 0-2 .896-2 2v14c0 1.104.897 2 2 2h14a2 2 0 0 0 2-2v-8.668l-2 2z"></path>
            </svg>
            <span>Éditer</span>
        </a>


        <button type="submit" form="form-delete">
            <svg width="24" height="24" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                <path fill="currentColor"
                      d="M7 21q-.825 0-1.412-.587T5 19V6H4V4h5V3h6v1h5v2h-1v13q0 .825-.587 1.413T17 21zm2-4h2V8H9zm4 0h2V8h-2z"></path>
            </svg>
            <span>Supprimer</span>
        </button>
    {% endif %}
{% endblock navigationLeft %}

{% block body %}
    <div class="d-flex height-full p=3">
        <section class="container flex:full height-full">
            {% include 'components/_flashes.html.twig' %}

            <article class="card card-lg">
                <div class="card-picture-lg">
                    <img src="{{ pin.imageName }}" width="300" height="200">
                </div>

                <div class="card-body">
                    <h3 class="card-title">
                        <a href="#" class="card-link">
                            {{ pin.title }}
                        </a>
                    </h3>

                    <p class="card-content">
                        {{ pin.description | nl2br }}
                    </p>

                    <time class="card-time">
                        Crée {{ pin.createdAt | ago(locale: 'fr') }},
                    </time>

                    <time class="card-time">
                        mis à jour {{ pin.updatedAt | ago(locale: 'fr') }}
                    </time>
                </div>

                {% if app.user == pin.user %}
                    <a href="{{ path('app_pin_edit', {
                        id: pin.id,
                    }) }}"></a>
                {% endif %}
            </article>
        </section>

        <form method="post" action="{{ path('app_pin_delete', {'id': pin.id}) }}"
              onsubmit="return confirm('Are you sure you want to delete this item?');"
              id="form-delete"
        >
            <input type="hidden" name="_token" value="{{ csrf_token('delete' ~ pin.id) }}">
        </form>
    </div>

{% endblock %}
