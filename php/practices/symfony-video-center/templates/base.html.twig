<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>{% block title %}Video Center!{% endblock %}</title>
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">

    {{ vite_entry_link_tags('app') }}

    {% block stylesheets %}{% endblock %}

    {% block javascripts %}
        {{ vite_entry_script_tags('app', {
            dependency: 'react'
        }) }}
        {% block importmap %}{{ importmap('app') }}{% endblock %}
    {% endblock %}
</head>
<body
    style="
    {% if body is defined %}
        --color: {{ body.color }};
        --color-primary: {{ body.primary }};
    {% else %}
        --color: #081c56;
        --color-primary: #2e4574;
    {% endif %}
    {% if hero is defined %}
        --hero-figure: url('{{ hero.figure }}');
    {% endif %}
        "
    class="hero"
>
<header class="header container {% if hero is defined %}hero shadow{% else %}bordered{% endif %}">
    <nav>
        <a href="{{ path('app_home') }}" class="header-logo">
            <span
                class="hl">{% if app.user %}{{ app.user.firstname | first }}{{ app.user.lastname | first }}{% else %}My{% endif %}</span>
            <span>Hit</span>
        </a>

        <ul class="header-primary-nav">
            {% block navPrimary %}
                {% if app.user %}
                    <li>
                        <a href="{{ path('app_video_create') }}">
                            Ajouter une vidéo
                        </a>
                    </li>
                {% endif %}
            {% endblock %}
        </ul>

        <ul>
            {% block navSecondary %}{% endblock %}

            {% if app.user %}
                <li>
                    <a href="{{ path('app_account_me') }}">
                        <img
                            src="{{ vich_uploader_asset(app.user, 'imageFile') }}"
                            alt="{{ app.user.firstname }} {{ app.user.lastname }} Avatar"
                            width="32"
                            height="32"
                        >
                        {{ app.user.firstname }} {{ app.user.lastname }}
                    </a>
                </li>
                <li>
                    <a href="{{ path('app_logout') }}">
                        Se déconnecter
                    </a>
                </li>
            {% else %}
                <li>
                    <a href="{{ path('app_login') }}">
                        Se connecter
                    </a>
                </li>
            {% endif %}
        </ul>
    </nav>
    {% if hero is defined %}
        {% if video is defined and video.premium and not app.user %}
            <a href="{{ path('app_login') }}" class="launch-video-btn"
               title="Vous devez être connecté pour voir la vidéo">
                <svg width="120" height="120" viewBox="0 0 120 120" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M40 30L90 60L40 90V30Z" fill="currentColor" fill-opacity="0.3" stroke="black"
                          stroke-width="2"
                          stroke-linecap="round" stroke-linejoin="round"></path>
                </svg>
            </a>
            {% elseif hero.video is defined %}
            <button type="button" class="launch-video-btn js-launch-video-btn" aria-label="Lancer la vidéo">
                <svg width="120" height="120" viewBox="0 0 120 120" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M40 30L90 60L40 90V30Z" fill="currentColor" fill-opacity="0.3" stroke="black"
                          stroke-width="2"
                          stroke-linecap="round" stroke-linejoin="round"></path>
                </svg>
            </button>

            <iframe
                src="{{ hero.video }}?amp;controls=0&rel=0&enablejsapi=1"
                hidden
                title="YouTube video player"
                frameborder="0"
                allow="autoplay; encrypted-media;"
                referrerpolicy="strict-origin-when-cross-origin"
                allowfullscreen
                class="js-yt-player"
                style="width: 100%; height: 100%"
            ></iframe>

            <script type="module">
                import {HeroVideo} from "{{ asset('scripts/hero.js') }}";

                let heroVideo = new HeroVideo();
                heroVideo.start();
            </script>
        {% else %}
            <div class="content-text">
                <h1 class="h3">Cours approfondis sur le Fullstack</h1>

                <h2 class="h1">
                    Code, rigole et progresse : nos vidéos rendent les cours funs et accessibles, car on est ensemble,
                    les
                    gars !
                </h2>

                <a class="btn btn-primary" href="/courses/">
                    Explorez nos cours en vidéos
                </a>
            </div>
        {% endif %}
    {% endif %}
</header>

<main class="container {% if hero is defined %}shadow{% endif %}">
    {% for type, messages in app.flashes %}
        <div class="alert alert-{{ type }}">
            {{ messages | join(". ") }}
        </div>
    {% endfor %}

    {% block body %}{% endblock %}
</main>
</body>
</html>
