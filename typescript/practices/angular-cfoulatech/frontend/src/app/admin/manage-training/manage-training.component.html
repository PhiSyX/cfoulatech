<div class="container">
	<h1 class="my-5">Gestion des formations</h1>

	<form (submit)="handleSave()" class="formulaire">
		<div class="input-group-lg">
			<label class="form-label" for="titre">Titre :</label>
			<input [(ngModel)]="newTrainingModel.title" class="form-control" id="titre" name="titre" required
				   type="text">
		</div>

		<div class="input-group-lg">
			<label class="form-label" for="description">Description :</label>
			<textarea [(ngModel)]="newTrainingModel.description" class="form-control" id="description" name="description"
					  required type="text"></textarea>
		</div>

		<div class="input-group-lg">
			<label class="form-label" for="objectif">Objectif :</label>
			<input [(ngModel)]="newTrainingModel.goal" class="form-control" id="objectif" name="objectif" required
				   type="text">
		</div>

		<div class="input-group-lg">
			<label class="form-label" for="duree">Durée :</label>
			<input [(ngModel)]="newTrainingModel.duration" class="form-control" id="duree" name="duree" required
				   type="number">
		</div>

		<div class="input-group-lg">
			<label class="form-label" for="niveau">Niveau :</label>
			<select [(ngModel)]="newTrainingModel.level" class="form-select " id="niveau" name="niveau">
				<option value="débutant">Débutant</option>
				<option value="intermédiaire">Intermédiaire</option>
				<option value="avancé">Avancé</option>
			</select>
		</div>

		<div class="d-flex gap-2">
			<div class="input-group-lg flex-grow-1">
				<label class="form-label" for="dateDebut">Date de début :</label>
				<input [(ngModel)]="newTrainingModel.startDate" class="form-control" id="dateDebut" name="dateDebut" required
					   type="date">
			</div>

			<div class="input-group-lg  flex-grow-1">
				<label class="form-label" for="dateFin">Date de fin :</label>
				<input [(ngModel)]="newTrainingModel.endDate" class="form-control" id="dateFin" name="dateFin" required
					   type="date">
			</div>

		</div>

		<div class="input-group-lg">
			<label class="form-label" for="statut">Statut :</label>
			<select [(ngModel)]="newTrainingModel.status" class="form-select " id="statut" name="statut">
				<option value="brouillon">Brouillon</option>
				<option value="publiée">Publiée</option>
				<option value="archivée">Archivée</option>
			</select>
		</div>

		<div class="d-inline-flex gap-2 mt-3">
			<button class="btn {{ editMode ? 'btn-info' : 'btn-primary' }}" type="submit">
				{{ editMode ? 'Modifier' : 'Ajouter' }}
			</button>

			<button (click)="handleCancel()" class="btn btn-outline-secondary" type="reset">
				Annuler
			</button>
		</div>
	</form>

	<hr>

	<table class="table table-striped table-bordered border-secondary-subtle">
		<thead>
		<tr>
			<th>Titre</th>
			<th>Objectif</th>
			<th>Date de début / Date de fin</th>
			<th>Durée</th>
			<th>Niveau</th>
			<th>Statut</th>
			<th>Actions</th>
		</tr>
		</thead>

		<tbody>
		<tr *ngFor="let training of trainings">
			<td>{{ training.title }}</td>
			<td>{{ training.goal }}</td>
			<td>{{ training.startDate }} / {{ training.endDate }}</td>
			<td>{{ training.duration }}</td>
			<td>{{ training.level }}</td>
			<td>{{ training.status }}</td>
			<td class="d-flex gap-2">
				<button (click)="handleEdit(training.id!)" class="btn btn-info" type="button">Modifier</button>
				<button (click)="handleDelete(training.id!)" class="btn btn-danger" type="button">Supprimer</button>
			</td>
		</tr>
		</tbody>
	</table>

	<br>

	<a class="btn btn-secondary" routerLink="/dashboard">Retour au dashboard</a>
</div>
